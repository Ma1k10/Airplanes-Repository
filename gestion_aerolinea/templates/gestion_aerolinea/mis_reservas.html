{% extends 'gestion_aerolinea/base.html' %}

{% block title %}Mis Reservas{% endblock %}

{% block content %}
    <h1>Mis Reservas</h1>

    {% if nuevas_reservas_info %}
        <div class="message">
            <h3>¡Reserva(s) Exitosa(s)!</h3>
            <p>Tus nuevos boletos electrónicos han sido generados.</p>
            {# Optionally, remove the detailed list here if you want to keep it minimal #}
            {# For example, you might just say "Revisa tus reservas a continuación." #}
        </div>
    {% endif %}

    <div class="card" style="margin-bottom: 20px;">
        <h2>Total de Reservas Realizadas: {{ reservas|length }}</h2>
    </div>

    {% if reservas %}
        <h2>Historial de Vuelos Reservados</h2>
        <ul>
        {% for reserva in reservas %}
            <li>
                Vuelo: <strong>{{ reserva.asiento.vuelo.origen }}</strong> a <strong>{{ reserva.asiento.vuelo.destino }}</strong>
                el {{ reserva.asiento.vuelo.fecha_salida|date:"d M Y" }} a las {{ reserva.asiento.vuelo.hora_salida|time:"H:i" }}
                <br>
                Asiento: <strong>{{ reserva.asiento.numero_asiento }}</strong>
                <br>
                Código de Boleto: {{ reserva.codigo_boleto|default:"N/A" }}
                <br>
                <a href="{% url 'generar_boleto_pdf' reserva.id %}" class="btn btn-sm">Descargar Boleto PDF</a>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No tienes reservas realizadas.</p>
    {% endif %}

    <div style="margin-top: 20px;">
        <a href="{% url 'lista_vuelos' %}" class="btn btn-primary">Hacer una Nueva Reserva</a>
    </div>
{% endblock %}